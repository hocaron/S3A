# 15. 이벤트 주도 아키텍처
> Event-Driven Architecture는 (EDA) 이벤트를 기반으로 하고, 이벤트는 DDD에서 두드러진다.
> EDA를 부주의하게 적용하면 모듈식 모놀리스를 분산된 커다란 진흙 덩어리로 만들 수 있다.
## 이벤트 주도 아키텍처
- 이벤트 주도 아키텍처는 시스템 컴포넌트가 이벤트 메시지를 교환하면서 비동기적으로 서로 커뮤니케이션하는 아키텍처 스타일
- EDA는 서비스 간 통신을 의미
- 이벤트 소싱은 서비스 내부에서 발생 -> 이 이벤트는 상태 전환을 나타낸다.
## 이벤트
- 메시지의 두 유형(이벤트, 커맨드)
  - 이벤트 : 이미 발생한 변화 설명
  - 커맨드 : 수행돼야 할 작업 설명
- 이벤트와 커맨드 모두 메시지로 비동기 통신
- 그러나 커맨드는 거부될 수 있다.
## 구조
- 이벤트는 일종의 데이터 레코드
## 이벤트 유형
- 이벤트 알림, 상태 전송, 도메인 이벤트 세 유형으로 분류
- 이벤트 알림 
  - 다른 컴포넌트가 반응할 비즈니스 도메인의 변경에 관한 메시지 -> 장황하지 않아야 함.
- 상태 전송
  - 구독자에게 제공자의 내부 상태에 대한 변경사항을 알려줌(ECST, Event-Carried State Transfer) -> 변경을 반영하는 모든 데이터 포함 = 완전한 스냅숏
  - 나타날 수 있는 두 가지 형태 : 완전한 스냅숏 , 업데이트 필드만 포함
- 도메인 이벤트
  - 도메인 이벤트는 이벤트를 설명하는 모든 정보 포함
  - 이벤트 알림
    - 다른 컴포넌트와의 연동을 돕기 위함
    - 충분한 정보 제공
  - 도메인 이벤트
    - 비즈니스 도메인을 모델링하고 설명하기 위한 것
    - 풍부한 모델 노출하면 안됨.
## 이벤트 주도 연동 설계
- 소프트웨어 설계는 주로 경계에 관한 것
### 최악의 상황만 가정할 것
- 다 잘될거라 는 사고방식은 전염병처럼 피하자.. ㅠ ㅠ ㅡ ㅠ
- 세부 정보를 노출하지 말자
# 16. 데이터 메시
> 실시간 데이터 처리 시스템은 시스템의 데이터를 조작하고, 시스템 환경에서 일어나는 일상적인 작업 조율 실시간 트랜잭션으로 구현
> 분석 데이터 관리 아키텍처 -> 데이터 메시
## 분석 데이터 모델과 트랜잭션 데이터 모델 비교
- 분석 모델은 실시간 데이터 처리 시스템에 대한 다양한 통찰 제공하도록 고안
- 분석 모델은 비즈니스 활동의 성과에 대한 통찰 제공
- 분석 모델은 데이터 취합하는 것이 다양한 유스케이스에 더 효과적
### 팩트 테이블
- 팩트는 이미 발생한 비즈니스 활동 나타냄.
- 분석 데이터는 추가만 가능
### 디멘전 테이블
- 팩트는 비즈니스 절차 또는 동작을 표현 / 디멘전은 팩트 묘사
### 분석 모델
- 스타 스키마 => 팩트와 디멘전 관계가 다대일
- 스노플레이크 스키마 => 디멘전 여러 수준 구성
## 분석 데이터 관리 플랫폼
### 데이터 웨어하우스
- 실시간 데이터 처리 시스템에서 데이터를 추출해서 분석 모델로 변환 후 분석 지향 DB에 적재
- 데이터 마트는 단일 비즈니스 부서의 분석과 같이, 잘 정의된 분석 요구사항에 관련된 데이터를 저장하는 일종의 디비
### 데이터 레이크
- 데이터를 바로 분석 모델로 변환하는 대신 원본 형태, 원래의 실시간 데이터 모델로 보관
### 데이터 메시
- 원천 데이터에 분석 모델을 일치시켜서 데이터를 사용하므로 여러 분석 모델 사용할 수 있다.
- 분석 모델은 통상 퍼블릭 API와 동일하게 취급돼야한다.
