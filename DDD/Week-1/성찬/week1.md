# Part 1. 전략적 설계
DDD의 두가지 설계 측면
* 전략적 측면: 무엇(어떤 소프트웨어), 왜(그 소프트웨어를 왜 만들지?)
* 전술적 측면: 어떻게? (구현)


## 1. 비즈니스 도메인 분석하기
### 비즈니스 도메인
* 기업의 주요 활동 영역 
* 회사가 고객에게 제공하는 서비스
* 기업은 비즈니스 도메인을 여러개 운영할 수 있다. 
* 비즈니스 도메인을 자주 변경할 수 있다.

### 하위 도메인
* 비즈니스 활동의 세분화된 영역
* 비즈니스 도메인과 하위 도메인은 상호작용해야한다.

#### 하위 도메인의 유형
* 핵심 하위 도메인
  * 경쟁업체와의 차별 점
  * 우버의 승차 공유 서비스
  * 구글의 검색 순위 알고리즘
* 복잡성
  * 구현하기 쉬우면 경쟁력이 없다.
  * 타 업체가 복제하기 어려운 수준의 복잡성이 필요하다.
* 경쟁 우위의 원천
  * 핵심 하위도메인에 반드시 기술이 필요한건 아니다.  
  * 비즈니스 문제를 해결할 수 있다면 원천이 어디든 관계 없다.

#### 일반 하위 도메인
* 모든 회사가 같은 방식으로 수행하는 비즈니스 활동
* 모든 회사에서 사용하기 때문에 복잡성이 높더라도 경쟁력이 없다.
* 인증/인가 시스템은 이미 검증된 시스템이 많기 때문에 가져다 쓰는 것이 합리적인 선택이다.

#### 지원 하위 도메인
* 회사의 비즈니스를 지원하는 활동
* 경쟁 우위를 제공하지 않는다.

#### 하위 도메인 비교
* 경쟁우위: 핵심 하위 도메인만 경쟁 우위 제공
* 복잡성: 핵심 하위 도메인 > 일반 하위 도메인 > 지원 하위 도메인
  * 도메인을 분류하는데에 중요한 지표가 된다.
  * 외부 솔루션을 연동하는 것보다 자체 솔루션을 구현하는게 더 간단하고 저렴한가? 지원 하위 도메인
  * 비즈니스 로직이 CRUD 와 비슷한가? -> 지원 하위 도메인
  * 복잡한 알고리즘, 비즈니스 프로세스 규칙, 변하지 않는 속성에 의해 조정되는가? -> 핵심 하위 도메인
* 변동성
  * 핵심 하위 도메인은 계속해서 개선하고 수정해야 경쟁력을 갖출 수 있다. 즉, 변동성이 크다
* 솔루션 전략
  * 핵심 하위 도메인은 외부 솔루션에 의지하지 않아야 한다. 직섭 구현해야한다.
  * 지원/일반 하위 도메인은 솔루션을 구매하는게 합리적일 수 있다.


| 하위 도메인 유형 | 경쟁 우위 | 복잡성 | 변동성 | 구현 방식    | 문제   |
| --------- | ----- | --- | --- | -------- | ---- |
| 핵심        | 예     | 높음  | 높음  | 사내 개발    | 흥미로움 |
| 일반        | 아니오   | 높음  | 낮음  | 구매/도입    | 해결됨  |
| 지원        | 아니오   | 낮음  | 낮음  | 사내 개발/하청 | 뻔함   |

#### 하위 도메인 경계 식별
* 경계를 식별하면 소프트웨어 솔루션 구축할 때 설계 의사 결정에 도움을 받을 수 있다.  
* 일반 하위 도메인을 면밀히 분석해보면 여러개의 하위 도메인으로 나눌 수 있다.
* 무한정 면밀히 분석할 수는 없다. 언제 멈춰야 할까?
* 핵심 하위 도메인은 중요하고 복잡하고 변동성 있기 때문에 최대한 많이 경계를 식별하자

**하위 도메인 세분화를 멈추는 시점**
* 응집된 유스케이스의 집한인 하위 도메인 (?)

## 2. 도메인 지식 찾아내기
* 비즈니스 문제를 기술로 해결한다.
* 비즈니스 문제를 해결하기 위한 비즈니스 지식은 도메인 전문가가 찾아낸다. 
* 엔지니어는 비즈니스 지식을 쌓는 것 보다 도메인 전문가를 이해하는데에 집중하는 것이 좋다.
* 즉, 엔지니어와 도메인 전문가와의 소통이 가장 중요하다.

### 소통을 방해하는 요소
* 프로젝트가 성공하려면 모든 이해관계자가 같은 내용에 동의하는 것이 중요하다.
* 이해관계자는 도메인 전문가, PO, 엔지니어, 디자이너, PM, QA, 분석가 등 너무 많다.
* 이해관계자는 너무 많지만 전통적인 소프트웨어 개발 생애주기는 엔지니어 친화적이다. (분석모델)
* 많은 지식들이 엔지니어 친화적으로 변환되면서 도메인 지식 손실이 발생한다.

#### 해결책: 유비쿼터스 언어
* 도메인 주도 설계의 초석
* 개발자 친화적 언어로 변환하지 말고 유비쿼터스 언어를 일관적으로 사용한다. 손실을 방지할 수 있다.
* 도메인 전문가가 유비쿼터스 언어를 사용해서 도메인 지식을 추론할 때 편안함을 느껴야한다.
* 일관성 있어야 하며 구체적으로 정의되어야 한다. 동의어를 허용하지 않는다.

##### 예시
AS-IS
* 광고의 iframe 은 HTMl 파일을 표시한다.
TO-BE
* 광고 캠페인은 다양한 창의적인 자료를 전시할 수 있다.

#### 비즈니스 도메인 모델
* 특정 용도를 마음에 둔 추상화의 결과물
  * 추상화란? 문제를 해결하기 위해 필요한 문제만 남긴다.
* 길 안내 지도, 지형도 등은 목적에 맞게 서로 다른 레벨의 추상화를 하고 있다.
* 추상화의 목적은 모호함이 아닌 절대적으로 정확할 수 있는 새로운 의미론적 수준을 만드는 것

#### 유비쿼터스 언어 용어집
* 유즈 케이스와 거킨 언어로 작성하는 것이 좋다 (?)

#### ETC
Q. 비영어권 나라에서는 유비쿼터스 언어를 어떤 언어로 정의해야함?
A. 모르겠는데 적어도 비즈니스 도메인 엔티티 이름은 영어 명사로 해라. 코드에서도 동일한 용어를 사용할 수 있을꺼다.
