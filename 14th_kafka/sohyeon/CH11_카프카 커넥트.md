# 11장 카프카 커넥트
- **카프카 커넥트**는 외부 시스템과 카프카를 손쉽게 연결하기 위한 프레임워크이다.
- 제공하는 REST API를 통해 빠르고 간단하게 커넥트의 설정을 조정하며 상황에 맞게 유연하게 대응할 수 있다.
- 주요 장점은 다음과 같다.
  - 👍 데이터 중심 파이프라인
  - 👍 유연성과 확장성
  - 👍 재사용성과 기능 확장
  - 👍 장애 및 복구

<br/>

## 11.1 카프카 커넥트의 핵심 개념

<img alt="image" width="500" src="https://github.com/mash-up-kr/S3A/assets/55437339/3340c4ff-0a46-4788-b740-2ac6b57dfa0a"/>

🔼 카프카 커넥트 구성도
- 카프카를 기준으로 들어오고 나가는 양방향에 커넥트가 존재한다.
  - 소스 방향에 있는 커넥트를 **소스 커넥트**라고 한다.
  - 싱크 방향에 있는 커넥트를 **싱크 커넥트**라고 한다.
 
<br/>

<img alt="image" width="500" src="https://github.com/mash-up-kr/S3A/assets/55437339/cf1cb4fb-1ed3-4e5e-a02e-bbd1b856765d"/>

🔼 카프카 커넥트 상세 구성도
- 총 3대의 워커(인스턴스)를 실행한 분산 모드 소스 커넥트를 나타낸 것이다.
- **워커**는 카프카 커넥트 프로세스가 실행되는 서버 또는 인스턴스 등을 의미하며, 커넥터나 태스크들이 워커에서 실행된다.
- 👍 분산 모드는 특정 워커에 장애가 발생하더라도 해당 워커에서 동작 중인 커넥터나 태스크들이 다른 워커로 이동해 **연속으로 동작**할 수 있다.
- **커넥터**는 직접 데이터를 복사하지 않고, 데이터를 어디에서 어디로 복사해야 하는지의 작업을 정의하고 관리하는 역할을 한다.
- **태스크**는 커넥터가 정의한 작업을 직접 수행하는 역할을 한다.

<br/>

## 11.2 카프카 커넥트의 내부 동작

<img alt="image" width="500" src="https://github.com/mash-up-kr/S3A/assets/55437339/28416ad6-afd8-4850-891c-1610ed72f676"/>

🔼 소스 커넥터 내부 동작 구성도
- 각 태스크들은 메시지들을 이동시키는데, 이때 커넥트는 파티셔닝 개념을 적용해 데이터들을 하위 집합으로 나눈다.
- 커넥터에서 나뉜 파티션들에는 오프셋과 같이 순차적으로 레코드들이 정렬된다.
- (1) 스트림 영역으로 표시된 부분이 데이터가 파티셔닝된 것을 나타낸다.
- (2) 최대 태스크 수는 2로 정의되어 있다.
- 결과적으로 태스크1은 토픽A와 토픽B에 데이터를 전송하고, 태스크2는 토픽B와 토픽C에 데이터를 전송한다.

<br/>

## 11.3 단독 모드 카프카 커넥트

<br/>

## 분산 모드 카프카 커넥트

<br/>

## 커넥터 기반의 미러 메이커 2.0
